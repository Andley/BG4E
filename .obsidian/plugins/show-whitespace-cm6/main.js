/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var w=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var u=(a,t)=>{for(var n in t)w(a,n,{get:t[n],enumerable:!0})},S=(a,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of p(t))!m.call(a,e)&&e!==n&&w(a,e,{get:()=>t[e],enumerable:!(s=d(t,e))||s.enumerable});return a};var f=a=>S(w({},"__esModule",{value:!0}),a);var k={};u(k,{default:()=>y});module.exports=f(k);var r=require("@codemirror/view"),g=require("obsidian");var o=require("obsidian"),l=class extends o.PluginSettingTab{constructor(t,n){super(t,n),this.plugin=n}async save(){await this.plugin.updateSettings(this.newSettings)}async display(){await this.plugin.loadSettings(),this.reset()}async reset(){this.newSettings=JSON.parse(JSON.stringify(this.plugin.settings)),this.drawElements()}drawElements(){let t=this.plugin.manifest.id,n=this.plugin.manifest.name;this.containerEl.empty(),this.containerEl.addClass(t),new o.Setting(this.containerEl).setHeading().setName(n),new o.Setting(this.containerEl).setName("Save settings").setClass(`${t}-save-reset`).addButton(s=>s.setIcon("reset").setTooltip("Reset to previously saved (or generated) values").onClick(()=>{this.reset(),console.log("(SW-CM6) Configuration reset")})).addButton(s=>{s.setIcon("save").setTooltip("Save current values").onClick(async()=>{await this.save()}),this.saveButton=s.buttonEl}),new o.Setting(this.containerEl).setName("Suppress plugin styles").setDesc("Disable the plugin's default styles. You will need to provide your own CSS snippets to customize the appearance of whitespace.").addToggle(s=>s.setValue(this.newSettings.disablePluginStyles).onChange(async e=>{let i=e!==this.newSettings.disablePluginStyles;this.newSettings.disablePluginStyles=e,i&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show blockquote markers").setDesc("Always display the leading '>' for blockquotes in Live Preview mode.").addToggle(s=>s.setValue(this.newSettings.showBlockquoteMarkers).onChange(async e=>{let i=e!==this.newSettings.showBlockquoteMarkers;this.newSettings.showBlockquoteMarkers=e,i&&this.drawElements()})),new o.Setting(this.containerEl).setName("Highlight List Markers").setDesc("Add a visual style to the space reserved by list markers (e.g., '-', '1.').").addToggle(s=>s.setValue(this.newSettings.outlineListMarkers).onChange(async e=>{let i=e!==this.newSettings.outlineListMarkers;this.newSettings.outlineListMarkers=e,i&&this.drawElements()})),new o.Setting(this.containerEl).setHeading().setName("Whitespace"),this.containerEl.createEl("p",{text:"By default, this plugin will show leading and trailing whitespace including marks for line endings, hard breaks, and tabs."}),new o.Setting(this.containerEl).setName("Show all whitespace").setDesc("Display markers for all whitespace characters, including those between words.").addToggle(s=>s.setValue(this.newSettings.showAllWhitespace).onChange(async e=>{let i=e!==this.newSettings.showAllWhitespace;this.newSettings.showAllWhitespace=e,i&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show consecutive whitespace").setDesc("Display markers only for multiple consecutive whitespace characters between words (included in 'Show All Whitespace').").addToggle(s=>s.setValue(this.newSettings.showExtraWhitespace).onChange(async e=>{let i=e||this.newSettings.showAllWhitespace,h=i!==this.newSettings.showExtraWhitespace;this.newSettings.showExtraWhitespace=i,h&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show line endings").setDesc("Display markers for line endings (different from hard line breaks).").addToggle(s=>s.setValue(this.newSettings.showLineEndings).onChange(async e=>{let i=e!==this.newSettings.showLineEndings;this.newSettings.showLineEndings=e,i&&this.drawElements()})),new o.Setting(this.containerEl).setHeading().setName("Content types"),this.containerEl.createEl("p",{text:"The following settings allow you to enable or disable the display of whitespace characters within the document. Unless otherwise noted, the appearance of whitespace follows the settings above."}),new o.Setting(this.containerEl).setName("Show frontmatter whitespace").setDesc("Display whitespace characters in YAML frontmatter (properties).").addToggle(s=>s.setValue(this.newSettings.showFrontmatterWhitespace).onChange(async e=>{let i=e||this.newSettings.showAllWhitespace,h=i!==this.newSettings.showFrontmatterWhitespace;this.newSettings.showFrontmatterWhitespace=i,h&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show table whitespace").setDesc("Display leading or trailing whitespace characters in tables.").addToggle(s=>s.setValue(this.newSettings.showTableWhitespace).onChange(async e=>{let i=e||this.newSettings.showAllWhitespace,h=i!==this.newSettings.showTableWhitespace;this.newSettings.showTableWhitespace=i,h&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show code block whitespace").setDesc("Display leading/trailing whitespace characters in code blocks (included in 'Show All Code Block Whitespace')").addToggle(s=>s.setValue(this.newSettings.showCodeblockWhitespace).onChange(async e=>{let i=e||this.newSettings.showAllCodeblockWhitespace,h=i!==this.newSettings.showCodeblockWhitespace;this.newSettings.showCodeblockWhitespace=i,h&&this.drawElements()})),new o.Setting(this.containerEl).setName("Show all code block whitespace").setDesc("Display all whitespace characters in code blocks, making them look more like a code editor. This will override the settings above.").addToggle(s=>s.setValue(this.newSettings.showAllCodeblockWhitespace).onChange(async e=>{let i=e!==this.newSettings.showAllCodeblockWhitespace;this.newSettings.showAllCodeblockWhitespace=e,i&&this.drawElements()}))}hide(){this.save()}};var b={version:{major:0,minor:0,patch:0},disablePluginStyles:!1,enabled:!0,outlineListMarkers:!1,showAllCodeblockWhitespace:!1,showAllWhitespace:!1,showBlockquoteMarkers:!1,showCodeblockWhitespace:!1,showExtraWhitespace:!1,showFrontmatterWhitespace:!0,showLineEndings:!0,showTableWhitespace:!0},c=class extends g.Plugin{constructor(){super(...arguments);this.cmExtension=[];this.classList=[];this.onExternalSettingsChange=(0,g.debounce)(async()=>{this.settings=Object.assign({},this.settings,await this.loadData()),this.updateSettings(this.settings),console.debug("(SW-CM6) external settings changed")},2e3,!0)}async onload(){console.info(`loading Show Whitespace (SW-CM6) v${this.manifest.version}`),await this.loadSettings(),this.addSettingTab(new l(this.app,this)),this.initClasses(),this.registerEditorExtension(this.cmExtension),this.handleExtension(!0);let n={id:"whitespace-toggle",name:"Toggle Show Whitespace",icon:"pilcrow",callback:async()=>this.toggleExtension(this)};this.addCommand(n)}handleExtension(n){console.log("(SW-CM6) enabled",this.settings.enabled),this.removeClasses(),this.initClasses(),this.cmExtension.length=0,this.settings.enabled&&(this.cmExtension.push((0,r.highlightWhitespace)()),this.cmExtension.push((0,r.highlightTrailingWhitespace)())),n||this.app.workspace.updateOptions()}initClasses(){this.classList=[this.manifest.id],(!this.settings.enabled||this.settings.disablePluginStyles)&&this.classList.push("swcm6-nix-plugin-styles"),this.settings.enabled&&(this.settings.showBlockquoteMarkers&&this.classList.push("swcm6-show-blockquote-markers"),this.settings.showCodeblockWhitespace&&this.classList.push("swcm6-show-codeblock-whitespace"),this.settings.showAllCodeblockWhitespace&&this.classList.push("swcm6-show-all-codeblock-whitespace"),this.settings.showExtraWhitespace&&this.classList.push("swcm6-show-extra-whitespace"),this.settings.showLineEndings&&this.classList.push("swcm6-show-line-endings"),this.settings.showFrontmatterWhitespace&&this.classList.push("swcm6-show-frontmatter-whitespace"),this.settings.showTableWhitespace&&this.classList.push("swcm6-show-table-whitespace"),this.settings.showAllWhitespace&&this.classList.push("swcm6-show-all-whitespace"),this.settings.outlineListMarkers&&this.classList.push("swcm6-outline-list-markers")),document.body.addClasses(this.classList)}removeClasses(){document.body.removeClasses(this.classList)}onunload(){console.log("(SW-CM6) unloading Show Whitespace"),this.removeClasses()}async handleConfigFileChange(){await super.handleConfigFileChange(),this.onExternalSettingsChange()}async toggleExtension(n){n.settings.enabled=!n.settings.enabled,n.updateSettings(this.settings)}async loadSettings(){if(!this.settings){let n=await this.loadData();this.settings=Object.assign({},b,n);let s=W(this.manifest.version);E(s,this.settings.version)!==0&&(this.settings.version=s,await this.saveSettings())}}async updateSettings(n){this.settings=Object.assign({},this.settings,n),await this.saveSettings(),this.handleExtension(!1),console.log("(SW-CM6) settings and classes updated")}async saveSettings(){await this.saveData(this.settings)}};function E(a,t){return a.major===t.major?a.minor===t.minor?a.patch-t.patch:a.minor-t.minor:a.major-t.major}function W(a){let t=a.split(".");return{major:Number(t[0]),minor:Number(t[1]),patch:Number(t[2])}}var y=c;

/* nosourcemap */